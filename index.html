<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LiaRead</title>
<link rel="stylesheet" href="style.css">

<!-- SDK Fedapay -->
<script src="https://checkout.fedapay.com/fedapay-checkout.js"></script>

<!-- SDK Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>
</head>
<body>

<header>
    <h1>LiaRead</h1>
    <span class="menu-toggle">⋯</span>
    <nav class="dropdown-menu">
        <a href="signup.html">Créer un compte auteur</a>
        <a href="dashboard.html">Mon compte</a>
        <a href="mailto:myliaread@gmail.com">Aide</a>
        <a href="best.sellers.html">Lire</a>
    </nav>
</header>

<section class="welcome">
    <p>Bienvenue sur LiaRead, votre bibliothèque enchantée ✨</p>
</section>

<section class="search-section">
    <input type="text" id="search" placeholder="Rechercher un livre...">
</section>

<section class="categories">
    <button data-cat="all">Tous</button>
    <button data-cat="roman">Roman</button>
    <button data-cat="romantique">Romantique</button>
    <button data-cat="milliardaire">Milliardaire</button>
    <button data-cat="nouvelle">Nouvelle</button>
    <button data-cat="conte">Conte</button>
    <button data-cat="vampire-loup">Vampire/Loup-Garou</button>
    <button data-cat="bd">BD</button>
    <button data-cat="aventure">Aventure</button>
    <button data-cat="bien-etre">Bien-être</button>
    <button data-cat="fantastique">Fantastique</button>
</section>

<section class="carousel-section" id="populaires">
    <h2>Populaires</h2>
    <div class="carousel" id="carousel-populaires">
        <!-- Exemple livre -->
        <div class="book" data-cat="roman">
            <h3>Aime moi</h3>
            <img src="couverture_aime-moi.jpg" alt="Aime moi">
            <p>Prix: 2500 XOF</p>
            <button class="fedapay-button" data-link="https://me.fedapay.com/56clJ3ZK">Acheter</button>
            <button class="popup-button" data-popup="popup-aime-moi">Lire un extrait</button>
        </div>
        <!-- Ajouter d'autres livres ici -->
    </div>
</section>

<section class="carousel-section" id="nouveaux">
    <h2>Nouveaux</h2>
    <div class="carousel" id="carousel-nouveaux">
        <!-- Laisse vide pour compléter après -->
    </div>
</section>

<section class="carousel-section" id="decouverte">
    <h2>Découverte</h2>
    <div class="carousel" id="carousel-decouverte">
        <!-- Laisse vide pour compléter après -->
    </div>
</section>

<footer>
    <p>Email: <a href="mailto:myliaread@gmail.com">myliaread@gmail.com</a></p>
    <p>WhatsApp: <a href="https://wa.me/2290147244055" target="_blank">+2290147244055</a></p>
</footer>

<script>
    // Configuration Firebase
    const firebaseConfig = {
        apiKey: "AIzaSyDpaf3wdXkypPKH443SIZcJRFiz02s-t30",
        authDomain: "liaread.firebaseapp.com",
        projectId: "liaread",
        storageBucket: "liaread.firebasestorage.app",
        messagingSenderId: "951394019167",
        appId: "1:951394019167:web:86825d5ebff4d77807f8ea",
        measurementId: "G-63JN91LVV6"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();
    const storage = firebase.storage();

    // Menu déroulant
    const menuToggle = document.querySelector('.menu-toggle');
    const dropdownMenu = document.querySelector('.dropdown-menu');
    menuToggle.addEventListener('click', () => {
        dropdownMenu.classList.toggle('active');
    });

    // Filtrer par catégorie
    const catButtons = document.querySelectorAll('.categories button');
    const books = document.querySelectorAll('.book');
    catButtons.forEach(btn => {
        btn.addEventListener('click', () => {
            const cat = btn.dataset.cat;
            books.forEach(book => {
                if(cat === 'all' || book.dataset.cat === cat) book.style.display = 'block';
                else book.style.display = 'none';
            });
        });
    });

    // Recherche
    const searchInput = document.getElementById('search');
    searchInput.addEventListener('input', () => {
        const value = searchInput.value.toLowerCase();
        books.forEach(book => {
            const title = book.querySelector('h3').textContent.toLowerCase();
            if(title.includes(value)) book.style.display = 'block';
            else book.style.display = 'none';
        });
    });

    // Fedapay Checkout
    document.querySelectorAll('.fedapay-button').forEach(btn => {
        btn.addEventListener('click', () => {
            const link = btn.dataset.link;
            if(link && link!=='#') window.open(link, '_blank');
            else alert('Lien de paiement non défini.');
        });
    });

    // Ouvrir popups via popups.html
    document.querySelectorAll('.popup-button').forEach(btn => {
        btn.addEventListener('click', () => {
            const popupId = btn.dataset.popup;
            window.open('popups.html#' + popupId, '_blank', 'width=500,height=600');
        });
    });

    // Simple carrousel scrollable avec le doigt
    document.querySelectorAll('.carousel').forEach(carousel => {
        let isDown = false;
        let startX;
        let scrollLeft;
        carousel.addEventListener('mousedown', e => { isDown = true; startX = e.pageX - carousel.offsetLeft; scrollLeft = carousel.scrollLeft; });
        carousel.addEventListener('mouseleave', () => isDown = false);
        carousel.addEventListener('mouseup', () => isDown = false);
        carousel.addEventListener('mousemove', e => {
            if(!isDown) return;
            e.preventDefault();
            const x = e.pageX - carousel.offsetLeft;
            const walk = (x - startX) * 2;
            carousel.scrollLeft = scrollLeft - walk;
        });
        // Touch devices
        let startTouchX, startScrollLeft;
        carousel.addEventListener('touchstart', e => { startTouchX = e.touches[0].pageX; startScrollLeft = carousel.scrollLeft; });
        carousel.addEventListener('touchmove', e => {
            const x = e.touches[0].pageX;
            const walk = (x - startTouchX) * 2;
            carousel.scrollLeft = startScrollLeft - walk;
        });
    });

</script>

</body>
    </html>
